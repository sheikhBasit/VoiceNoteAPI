============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pytest.ini
plugins: cov-4.1.0, xdist-3.5.0, asyncio-0.23.2, timeout-2.2.0, locust-2.43.1, anyio-4.12.1
asyncio: mode=Mode.AUTO
{"timestamp": "2026-02-15T13:20:09.438967+00:00", "level": "INFO", "logger": "VoiceNote", "message": "Testing endpoints enabled (non-production environment)", "filename": "main.py", "funcName": "<module>", "lineno": 326, "pathname": "/app/app/main.py"}
DEBUG: DATABASE_URL from os.getenv: postgresql://postgres:password@localhost:5433/voicenote
collected 882 items

<Dir app>
  <Dir tests>
    <Dir ai>
      <Module test_action_suggestion_service.py>
        <Function test_generate_google_search>
        <Function test_generate_email_draft>
        <Function test_generate_whatsapp_message>
        <Function test_generate_call_link>
        <Function test_generate_map_link>
        <Function test_generate_ai_prompt>
      <Module test_audio_quality.py>
        <Class TestAudioQualityAnalyzer>
          <Function test_analyze_ideal_audio>
          <Function test_analyze_noisy_audio>
          <Function test_analyze_worst_case_audio>
          <Function test_llm_feedback_fallback>
          <Function test_full_analysis>
          <Function test_quality_metrics_completeness>
          <Function test_analysis_performance>
      <Module test_phase2_ai_service.py>
        <Class TestAIServiceUtilities>
          <Function test_transcript_validation_valid>
          <Function test_transcript_validation_empty>
          <Function test_transcript_validation_whitespace_only>
          <Function test_transcript_validation_too_long>
          <Function test_json_validation_valid>
          <Function test_json_validation_invalid>
          <Function test_json_validation_empty>
          <Function test_json_validation_not_dict>
          <Function test_ai_response_validation_valid>
          <Function test_ai_response_validation_missing_field>
          <Function test_ai_response_validation_none_field>
        <Class TestRetryLogic>
          <Function test_retry_success_first_attempt>
          <Function test_retry_success_after_failure>
          <Function test_retry_exhausted>
          <Function test_retry_exponential_backoff>
        <Class TestRateLimiter>
          <Function test_rate_limiter_allow_under_limit>
          <Function test_rate_limiter_reject_over_limit>
          <Function test_rate_limiter_reset_after_window>
          <Function test_rate_limiter_get_wait_time>
        <Class TestRequestTracker>
          <Function test_tracker_start_and_end_request>
          <Function test_tracker_error_request>
          <Function test_tracker_multiple_requests>
        <Class TestAIServiceWithRetry>
          <Coroutine test_llm_brain_with_timeout>
          <Coroutine test_transcribe_groq_rate_limited>
          <Function test_llm_brain_input_validation>
          <Function test_llm_brain_json_validation>
        <Class TestAIServiceIntegration>
          <Function test_retry_decorator_on_function>
          <Function test_validation_chain>
          <Function test_request_tracking_workflow>
          <Function test_rate_limiter_across_services>
        <Class TestErrorHandling>
          <Function test_invalid_transcript_error>
          <Function test_invalid_json_error>
          <Function test_missing_required_field_error>
          <Function test_retry_exhaustion_error>
      <Module test_phase2_ai_utilities.py>
        <Class TestTranscriptValidation>
          <Function test_valid_transcript>
          <Function test_empty_transcript>
          <Function test_whitespace_only_transcript>
          <Function test_very_long_transcript>
          <Function test_max_length_transcript>
        <Class TestJSONValidation>
          <Function test_valid_json_dict>
          <Function test_empty_json_string>
          <Function test_whitespace_only_json>
          <Function test_invalid_json>
          <Function test_json_array_not_object>
          <Function test_json_string_not_object>
          <Function test_complex_json_object>
        <Class TestResponseValidation>
          <Function test_valid_response>
          <Function test_missing_required_field>
          <Function test_none_required_field>
          <Function test_extra_fields_allowed>
          <Function test_single_required_field>
        <Class TestRetryDecorator>
          <Function test_success_on_first_attempt>
          <Function test_success_after_failures>
          <Function test_retry_exhausted>
          <Function test_exponential_backoff_timing>
          <Function test_specific_exception_handling>
        <Class TestRateLimiter>
          <Function test_allow_requests_under_limit>
          <Function test_reject_requests_over_limit>
          <Function test_rate_limit_resets_after_window>
          <Function test_get_wait_time_when_allowed>
          <Function test_get_wait_time_when_limited>
          <Function test_multiple_rate_limiters_independent>
        <Class TestRequestTracker>
          <Function test_track_successful_request>
          <Function test_track_failed_request>
          <Function test_track_multiple_requests>
          <Function test_error_rate_calculation>
          <Function test_average_latency>
        <Class TestValidationChaining>
          <Function test_transcript_then_json>
          <Function test_json_then_response_validation>
          <Function test_all_validators_together>
        <Class TestIntegration>
          <Function test_retry_with_rate_limiting>
          <Function test_request_tracking_with_validation>
          <Function test_error_scenario_handling>
      <Module test_phase2_extraction.py>
        <Coroutine test_llm_brain_extraction_with_entities_and_actions>
        <Coroutine test_llm_brain_extraction_with_whatsapp_and_maps>
      <Module test_phase3_rag.py>
        <Coroutine test_rag_find_similar_notes>
        <Function test_rag_format_context>
        <Coroutine test_semantic_search_endpoint>
        <Coroutine test_ai_ask_endpoint>
      <Module test_phase4_analytics.py>
        <Coroutine test_team_metrics_calculation>
        <Coroutine test_team_analytics_endpoint>
        <Coroutine test_lead_extraction_persistence>
    <Dir enterprise>
      <Module test_b2b_oauth.py>
        <Function test_list_integrations_empty>
        <Function test_connect_google>
        <Function test_connect_notion>
        <Function test_disconnect_integration>
      <Module test_minio_architecture.py>
        <Class TestMinIOArchitecture>
          <Function test_api_health>
          <Function test_presigned_url_generation>
          <Function test_minio_direct_upload>
          <Function test_storage_key_processing>
          <Function test_processing_completion>
          <Function test_privacy_cleanup>
          <Function test_legacy_upload_compatibility>
          <Function test_invalid_storage_key>
          <Function test_missing_audio_source>
          <Function test_queue_routing>
        <Class TestMinIOConfiguration>
          <Function test_minio_health>
          <Function test_bucket_exists>
        <Class TestCeleryQueues>
          <Function test_worker_queues>
    <Dir evaluation>
      <Module test_rag_evaluation.py>
        <Class TestRAGEvaluation>
          <Function test_precision_at_k>
          <Function test_recall_at_k>
          <Function test_mean_reciprocal_rank>
          <Function test_cosine_similarity>
          <Function test_embedding_coherence>
          <Function test_simple_bleu>
          <Function test_full_rag_evaluation>
          <Function test_evaluation_performance>
    <Dir integration>
      <Module test_admin_system.py>
        <Class TestAdminRoleAssignment>
          <Function test_grant_full_admin_role>
          <Function test_grant_moderator_role>
          <Function test_grant_viewer_role>
          <Function test_revoke_admin_role>
          <Function test_grant_admin_to_nonexistent_user>
        <Class TestPermissionChecking>
          <Function test_is_admin_check>
          <Function test_has_permission_single>
          <Function test_has_any_permission>
          <Function test_has_all_permissions>
        <Class TestPermissionUpdate>
          <Function test_update_permissions_add>
          <Function test_update_permissions_revoke>
          <Function test_update_permissions_nonexistent_user>
          <Function test_update_permissions_non_admin>
        <Class TestAdminActionLogging>
          <Function test_log_admin_action>
          <Function test_log_make_admin_action>
        <Class TestAdminDataAccess>
          <Function test_admin_can_see_all_notes>
          <Function test_admin_can_delete_any_note>
          <Function test_admin_can_delete_any_user>
        <Class TestAdminSecurityBoundaries>
          <Function test_moderator_cannot_manage_admins>
          <Function test_viewer_cannot_delete_content>
          <Function test_regular_user_cannot_see_admin_operations>
        <Class TestAdminTimestamps>
          <Function test_admin_created_at_set_on_grant>
          <Function test_admin_last_action_updated>
      <Module test_all_endpoints.py>
        <Class TestUserEndpoints>
          <Function test_user_register_new_user>
          <Function test_user_login_existing_user>
          <Function test_user_get_me>
          <Function test_user_update_me>
          <Function test_user_logout>
          <Function test_user_search>
          <Function test_user_delete_me>
        <Class TestNoteEndpoints>
          <Function test_note_get_presigned_url>
          <Function test_note_create>
          <Function test_note_list>
          <Function test_note_get_dashboard>
          <Function test_note_get_by_id>
          <Function test_note_update>
          <Function test_note_delete>
          <Function test_note_semantic_analysis>
          <Function test_note_whatsapp_draft>
        <Class TestTaskEndpoints>
          <Function test_task_create>
          <Function test_task_list>
          <Function test_task_due_today>
          <Function test_task_overdue>
          <Function test_task_assigned_to_me>
          <Function test_task_search>
          <Function test_task_stats>
          <Function test_task_get_by_id>
          <Function test_task_update>
          <Function test_task_delete>
          <Function test_task_duplicate>
        <Class TestAdminEndpoints>
          <Function test_admin_list_users>
          <Function test_admin_user_stats>
          <Function test_admin_list_admins>
          <Function test_admin_status>
          <Function test_admin_get_audit_logs>
        <Class TestAIEndpoints>
          <Function test_ai_search>
          <Function test_ai_stats>
        <Class TestErrorHandling>
          <Function test_unauthorized_request>
          <Function test_invalid_token>
          <Function test_nonexistent_note>
          <Function test_nonexistent_task>
          <Function test_invalid_note_data>
          <Function test_invalid_task_data>
      <Module test_backend_gaps.py>
        <Function test_task_complete_endpoint>
        <Function test_task_statistics_alias>
        <Function test_user_login_alias>
        <Function test_sync_user_with_password>
        <Function test_get_note_verbose_transcripts>
      <Module test_comprehensive_500_part1.py>
        <Class TestAudioValidation>
          <Function test_validate_existing_file_001>
          <Function test_validate_nonexistent_file_002>
          <Function test_validate_empty_file_003>
          <Function test_validate_corrupted_file_004>
          <Function test_validate_wrong_format_005>
          <Function test_validate_various_scenarios[6]>
          <Function test_validate_various_scenarios[7]>
          <Function test_validate_various_scenarios[8]>
          <Function test_validate_various_scenarios[9]>
          <Function test_validate_various_scenarios[10]>
          <Function test_validate_various_scenarios[11]>
          <Function test_validate_various_scenarios[12]>
          <Function test_validate_various_scenarios[13]>
          <Function test_validate_various_scenarios[14]>
          <Function test_validate_various_scenarios[15]>
          <Function test_validate_various_scenarios[16]>
          <Function test_validate_various_scenarios[17]>
          <Function test_validate_various_scenarios[18]>
          <Function test_validate_various_scenarios[19]>
          <Function test_validate_various_scenarios[20]>
          <Function test_validate_various_scenarios[21]>
          <Function test_validate_various_scenarios[22]>
          <Function test_validate_various_scenarios[23]>
          <Function test_validate_various_scenarios[24]>
          <Function test_validate_various_scenarios[25]>
          <Function test_validate_various_scenarios[26]>
          <Function test_validate_various_scenarios[27]>
          <Function test_validate_various_scenarios[28]>
          <Function test_validate_various_scenarios[29]>
          <Function test_validate_various_scenarios[30]>
          <Function test_validate_various_scenarios[31]>
          <Function test_validate_various_scenarios[32]>
          <Function test_validate_various_scenarios[33]>
          <Function test_validate_various_scenarios[34]>
          <Function test_validate_various_scenarios[35]>
          <Function test_validate_various_scenarios[36]>
          <Function test_validate_various_scenarios[37]>
          <Function test_validate_various_scenarios[38]>
          <Function test_validate_various_scenarios[39]>
          <Function test_validate_various_scenarios[40]>
          <Function test_validate_various_scenarios[41]>
          <Function test_validate_various_scenarios[42]>
          <Function test_validate_various_scenarios[43]>
          <Function test_validate_various_scenarios[44]>
          <Function test_validate_various_scenarios[45]>
          <Function test_validate_various_scenarios[46]>
          <Function test_validate_various_scenarios[47]>
          <Function test_validate_various_scenarios[48]>
          <Function test_validate_various_scenarios[49]>
          <Function test_validate_various_scenarios[50]>
        <Class TestAudioChunking>
          <Function test_should_chunk_short_audio_051>
          <Function test_should_chunk_long_audio_052>
          <Function test_should_chunk_medium_audio_053>
          <Function test_should_chunk_boundary_054>
          <Function test_merge_transcripts_empty_055>
          <Function test_merge_transcripts_single_056>
          <Function test_merge_transcripts_multiple_057>
          <Function test_chunking_various_scenarios[58]>
          <Function test_chunking_various_scenarios[59]>
          <Function test_chunking_various_scenarios[60]>
          <Function test_chunking_various_scenarios[61]>
          <Function test_chunking_various_scenarios[62]>
          <Function test_chunking_various_scenarios[63]>
          <Function test_chunking_various_scenarios[64]>
          <Function test_chunking_various_scenarios[65]>
          <Function test_chunking_various_scenarios[66]>
          <Function test_chunking_various_scenarios[67]>
          <Function test_chunking_various_scenarios[68]>
          <Function test_chunking_various_scenarios[69]>
          <Function test_chunking_various_scenarios[70]>
          <Function test_chunking_various_scenarios[71]>
          <Function test_chunking_various_scenarios[72]>
          <Function test_chunking_various_scenarios[73]>
          <Function test_chunking_various_scenarios[74]>
          <Function test_chunking_various_scenarios[75]>
          <Function test_chunking_various_scenarios[76]>
          <Function test_chunking_various_scenarios[77]>
          <Function test_chunking_various_scenarios[78]>
          <Function test_chunking_various_scenarios[79]>
          <Function test_chunking_various_scenarios[80]>
          <Function test_chunking_various_scenarios[81]>
          <Function test_chunking_various_scenarios[82]>
          <Function test_chunking_various_scenarios[83]>
          <Function test_chunking_various_scenarios[84]>
          <Function test_chunking_various_scenarios[85]>
          <Function test_chunking_various_scenarios[86]>
          <Function test_chunking_various_scenarios[87]>
          <Function test_chunking_various_scenarios[88]>
          <Function test_chunking_various_scenarios[89]>
          <Function test_chunking_various_scenarios[90]>
          <Function test_chunking_various_scenarios[91]>
          <Function test_chunking_various_scenarios[92]>
          <Function test_chunking_various_scenarios[93]>
          <Function test_chunking_various_scenarios[94]>
          <Function test_chunking_various_scenarios[95]>
          <Function test_chunking_various_scenarios[96]>
          <Function test_chunking_various_scenarios[97]>
          <Function test_chunking_various_scenarios[98]>
          <Function test_chunking_various_scenarios[99]>
          <Function test_chunking_various_scenarios[100]>
        <Class TestAudioQuality>
          <Function test_quality_analysis_ideal_101>
          <Function test_quality_analysis_noisy_102>
          <Function test_quality_metrics_completeness_103>
          <Function test_quality_score_range_104>
          <Function test_quality_category_valid_105>
          <Function test_quality_various_scenarios[106]>
          <Function test_quality_various_scenarios[107]>
          <Function test_quality_various_scenarios[108]>
          <Function test_quality_various_scenarios[109]>
          <Function test_quality_various_scenarios[110]>
          <Function test_quality_various_scenarios[111]>
          <Function test_quality_various_scenarios[112]>
          <Function test_quality_various_scenarios[113]>
          <Function test_quality_various_scenarios[114]>
          <Function test_quality_various_scenarios[115]>
          <Function test_quality_various_scenarios[116]>
          <Function test_quality_various_scenarios[117]>
          <Function test_quality_various_scenarios[118]>
          <Function test_quality_various_scenarios[119]>
          <Function test_quality_various_scenarios[120]>
          <Function test_quality_various_scenarios[121]>
          <Function test_quality_various_scenarios[122]>
          <Function test_quality_various_scenarios[123]>
          <Function test_quality_various_scenarios[124]>
          <Function test_quality_various_scenarios[125]>
          <Function test_quality_various_scenarios[126]>
          <Function test_quality_various_scenarios[127]>
          <Function test_quality_various_scenarios[128]>
          <Function test_quality_various_scenarios[129]>
          <Function test_quality_various_scenarios[130]>
          <Function test_quality_various_scenarios[131]>
          <Function test_quality_various_scenarios[132]>
          <Function test_quality_various_scenarios[133]>
          <Function test_quality_various_scenarios[134]>
          <Function test_quality_various_scenarios[135]>
          <Function test_quality_various_scenarios[136]>
          <Function test_quality_various_scenarios[137]>
          <Function test_quality_various_scenarios[138]>
          <Function test_quality_various_scenarios[139]>
          <Function test_quality_various_scenarios[140]>
          <Function test_quality_various_scenarios[141]>
          <Function test_quality_various_scenarios[142]>
          <Function test_quality_various_scenarios[143]>
          <Function test_quality_various_scenarios[144]>
          <Function test_quality_various_scenarios[145]>
          <Function test_quality_various_scenarios[146]>
          <Function test_quality_various_scenarios[147]>
          <Function test_quality_various_scenarios[148]>
          <Function test_quality_various_scenarios[149]>
          <Function test_quality_various_scenarios[150]>
          <Function test_quality_various_scenarios[151]>
          <Function test_quality_various_scenarios[152]>
          <Function test_quality_various_scenarios[153]>
          <Function test_quality_various_scenarios[154]>
          <Function test_quality_various_scenarios[155]>
          <Function test_quality_various_scenarios[156]>
          <Function test_quality_various_scenarios[157]>
          <Function test_quality_various_scenarios[158]>
          <Function test_quality_various_scenarios[159]>
          <Function test_quality_various_scenarios[160]>
          <Function test_quality_various_scenarios[161]>
          <Function test_quality_various_scenarios[162]>
          <Function test_quality_various_scenarios[163]>
          <Function test_quality_various_scenarios[164]>
          <Function test_quality_various_scenarios[165]>
          <Function test_quality_various_scenarios[166]>
          <Function test_quality_various_scenarios[167]>
          <Function test_quality_various_scenarios[168]>
          <Function test_quality_various_scenarios[169]>
          <Function test_quality_various_scenarios[170]>
          <Function test_quality_various_scenarios[171]>
          <Function test_quality_various_scenarios[172]>
          <Function test_quality_various_scenarios[173]>
          <Function test_quality_various_scenarios[174]>
          <Function test_quality_various_scenarios[175]>
          <Function test_quality_various_scenarios[176]>
          <Function test_quality_various_scenarios[177]>
          <Function test_quality_various_scenarios[178]>
          <Function test_quality_various_scenarios[179]>
          <Function test_quality_various_scenarios[180]>
          <Function test_quality_various_scenarios[181]>
          <Function test_quality_various_scenarios[182]>
          <Function test_quality_various_scenarios[183]>
          <Function test_quality_various_scenarios[184]>
          <Function test_quality_various_scenarios[185]>
          <Function test_quality_various_scenarios[186]>
          <Function test_quality_various_scenarios[187]>
          <Function test_quality_various_scenarios[188]>
          <Function test_quality_various_scenarios[189]>
          <Function test_quality_various_scenarios[190]>
          <Function test_quality_various_scenarios[191]>
          <Function test_quality_various_scenarios[192]>
          <Function test_quality_various_scenarios[193]>
          <Function test_quality_various_scenarios[194]>
          <Function test_quality_various_scenarios[195]>
          <Function test_quality_various_scenarios[196]>
          <Function test_quality_various_scenarios[197]>
          <Function test_quality_various_scenarios[198]>
          <Function test_quality_various_scenarios[199]>
          <Function test_quality_various_scenarios[200]>
        <Class TestEdgeCases>
          <Function test_very_short_audio_201>
          <Function test_silent_audio_202>
          <Function test_pure_noise_203>
          <Function test_null_path_204>
          <Function test_empty_string_path_205>
          <Function test_edge_case_scenarios[206]>
          <Function test_edge_case_scenarios[207]>
          <Function test_edge_case_scenarios[208]>
          <Function test_edge_case_scenarios[209]>
          <Function test_edge_case_scenarios[210]>
          <Function test_edge_case_scenarios[211]>
          <Function test_edge_case_scenarios[212]>
          <Function test_edge_case_scenarios[213]>
          <Function test_edge_case_scenarios[214]>
          <Function test_edge_case_scenarios[215]>
          <Function test_edge_case_scenarios[216]>
          <Function test_edge_case_scenarios[217]>
          <Function test_edge_case_scenarios[218]>
          <Function test_edge_case_scenarios[219]>
          <Function test_edge_case_scenarios[220]>
          <Function test_edge_case_scenarios[221]>
          <Function test_edge_case_scenarios[222]>
          <Function test_edge_case_scenarios[223]>
          <Function test_edge_case_scenarios[224]>
          <Function test_edge_case_scenarios[225]>
          <Function test_edge_case_scenarios[226]>
          <Function test_edge_case_scenarios[227]>
          <Function test_edge_case_scenarios[228]>
          <Function test_edge_case_scenarios[229]>
          <Function test_edge_case_scenarios[230]>
          <Function test_edge_case_scenarios[231]>
          <Function test_edge_case_scenarios[232]>
          <Function test_edge_case_scenarios[233]>
          <Function test_edge_case_scenarios[234]>
          <Function test_edge_case_scenarios[235]>
          <Function test_edge_case_scenarios[236]>
          <Function test_edge_case_scenarios[237]>
          <Function test_edge_case_scenarios[238]>
          <Function test_edge_case_scenarios[239]>
          <Function test_edge_case_scenarios[240]>
          <Function test_edge_case_scenarios[241]>
          <Function test_edge_case_scenarios[242]>
          <Function test_edge_case_scenarios[243]>
          <Function test_edge_case_scenarios[244]>
          <Function test_edge_case_scenarios[245]>
          <Function test_edge_case_scenarios[246]>
          <Function test_edge_case_scenarios[247]>
          <Function test_edge_case_scenarios[248]>
          <Function test_edge_case_scenarios[249]>
          <Function test_edge_case_scenarios[250]>
          <Function test_edge_case_scenarios[251]>
          <Function test_edge_case_scenarios[252]>
          <Function test_edge_case_scenarios[253]>
          <Function test_edge_case_scenarios[254]>
          <Function test_edge_case_scenarios[255]>
          <Function test_edge_case_scenarios[256]>
          <Function test_edge_case_scenarios[257]>
          <Function test_edge_case_scenarios[258]>
          <Function test_edge_case_scenarios[259]>
          <Function test_edge_case_scenarios[260]>
          <Function test_edge_case_scenarios[261]>
          <Function test_edge_case_scenarios[262]>
          <Function test_edge_case_scenarios[263]>
          <Function test_edge_case_scenarios[264]>
          <Function test_edge_case_scenarios[265]>
          <Function test_edge_case_scenarios[266]>
          <Function test_edge_case_scenarios[267]>
          <Function test_edge_case_scenarios[268]>
          <Function test_edge_case_scenarios[269]>
          <Function test_edge_case_scenarios[270]>
          <Function test_edge_case_scenarios[271]>
          <Function test_edge_case_scenarios[272]>
          <Function test_edge_case_scenarios[273]>
          <Function test_edge_case_scenarios[274]>
          <Function test_edge_case_scenarios[275]>
          <Function test_edge_case_scenarios[276]>
          <Function test_edge_case_scenarios[277]>
          <Function test_edge_case_scenarios[278]>
          <Function test_edge_case_scenarios[279]>
          <Function test_edge_case_scenarios[280]>
          <Function test_edge_case_scenarios[281]>
          <Function test_edge_case_scenarios[282]>
          <Function test_edge_case_scenarios[283]>
          <Function test_edge_case_scenarios[284]>
          <Function test_edge_case_scenarios[285]>
          <Function test_edge_case_scenarios[286]>
          <Function test_edge_case_scenarios[287]>
          <Function test_edge_case_scenarios[288]>
          <Function test_edge_case_scenarios[289]>
          <Function test_edge_case_scenarios[290]>
          <Function test_edge_case_scenarios[291]>
          <Function test_edge_case_scenarios[292]>
          <Function test_edge_case_scenarios[293]>
          <Function test_edge_case_scenarios[294]>
          <Function test_edge_case_scenarios[295]>
          <Function test_edge_case_scenarios[296]>
          <Function test_edge_case_scenarios[297]>
          <Function test_edge_case_scenarios[298]>
          <Function test_edge_case_scenarios[299]>
          <Function test_edge_case_scenarios[300]>
        <Class TestPerformance>
          <Function test_validation_speed_301>
          <Function test_quality_analysis_speed_302>
          <Function test_performance_scenarios[303]>
          <Function test_performance_scenarios[304]>
          <Function test_performance_scenarios[305]>
          <Function test_performance_scenarios[306]>
          <Function test_performance_scenarios[307]>
          <Function test_performance_scenarios[308]>
          <Function test_performance_scenarios[309]>
          <Function test_performance_scenarios[310]>
          <Function test_performance_scenarios[311]>
          <Function test_performance_scenarios[312]>
          <Function test_performance_scenarios[313]>
          <Function test_performance_scenarios[314]>
          <Function test_performance_scenarios[315]>
          <Function test_performance_scenarios[316]>
          <Function test_performance_scenarios[317]>
          <Function test_performance_scenarios[318]>
          <Function test_performance_scenarios[319]>
          <Function test_performance_scenarios[320]>
          <Function test_performance_scenarios[321]>
          <Function test_performance_scenarios[322]>
          <Function test_performance_scenarios[323]>
          <Function test_performance_scenarios[324]>
          <Function test_performance_scenarios[325]>
          <Function test_performance_scenarios[326]>
          <Function test_performance_scenarios[327]>
          <Function test_performance_scenarios[328]>
          <Function test_performance_scenarios[329]>
          <Function test_performance_scenarios[330]>
          <Function test_performance_scenarios[331]>
          <Function test_performance_scenarios[332]>
          <Function test_performance_scenarios[333]>
          <Function test_performance_scenarios[334]>
          <Function test_performance_scenarios[335]>
          <Function test_performance_scenarios[336]>
          <Function test_performance_scenarios[337]>
          <Function test_performance_scenarios[338]>
          <Function test_performance_scenarios[339]>
          <Function test_performance_scenarios[340]>
          <Function test_performance_scenarios[341]>
          <Function test_performance_scenarios[342]>
          <Function test_performance_scenarios[343]>
          <Function test_performance_scenarios[344]>
          <Function test_performance_scenarios[345]>
          <Function test_performance_scenarios[346]>
          <Function test_performance_scenarios[347]>
          <Function test_performance_scenarios[348]>
          <Function test_performance_scenarios[349]>
          <Function test_performance_scenarios[350]>
          <Function test_performance_scenarios[351]>
          <Function test_performance_scenarios[352]>
          <Function test_performance_scenarios[353]>
          <Function test_performance_scenarios[354]>
          <Function test_performance_scenarios[355]>
          <Function test_performance_scenarios[356]>
          <Function test_performance_scenarios[357]>
          <Function test_performance_scenarios[358]>
          <Function test_performance_scenarios[359]>
          <Function test_performance_scenarios[360]>
          <Function test_performance_scenarios[361]>
          <Function test_performance_scenarios[362]>
          <Function test_performance_scenarios[363]>
          <Function test_performance_scenarios[364]>
          <Function test_performance_scenarios[365]>
          <Function test_performance_scenarios[366]>
          <Function test_performance_scenarios[367]>
          <Function test_performance_scenarios[368]>
          <Function test_performance_scenarios[369]>
          <Function test_performance_scenarios[370]>
          <Function test_performance_scenarios[371]>
          <Function test_performance_scenarios[372]>
          <Function test_performance_scenarios[373]>
          <Function test_performance_scenarios[374]>
          <Function test_performance_scenarios[375]>
          <Function test_performance_scenarios[376]>
          <Function test_performance_scenarios[377]>
          <Function test_performance_scenarios[378]>
          <Function test_performance_scenarios[379]>
          <Function test_performance_scenarios[380]>
          <Function test_performance_scenarios[381]>
          <Function test_performance_scenarios[382]>
          <Function test_performance_scenarios[383]>
          <Function test_performance_scenarios[384]>
          <Function test_performance_scenarios[385]>
          <Function test_performance_scenarios[386]>
          <Function test_performance_scenarios[387]>
          <Function test_performance_scenarios[388]>
          <Function test_performance_scenarios[389]>
          <Function test_performance_scenarios[390]>
          <Function test_performance_scenarios[391]>
          <Function test_performance_scenarios[392]>
          <Function test_performance_scenarios[393]>
          <Function test_performance_scenarios[394]>
          <Function test_performance_scenarios[395]>
          <Function test_performance_scenarios[396]>
          <Function test_performance_scenarios[397]>
          <Function test_performance_scenarios[398]>
          <Function test_performance_scenarios[399]>
          <Function test_performance_scenarios[400]>
        <Class TestRobustness>
          <Function test_no_crash_on_corrupted_401>
          <Function test_no_crash_on_wrong_format_402>
          <Function test_robustness_scenarios[403]>
          <Function test_robustness_scenarios[404]>
          <Function test_robustness_scenarios[405]>
          <Function test_robustness_scenarios[406]>
          <Function test_robustness_scenarios[407]>
          <Function test_robustness_scenarios[408]>
          <Function test_robustness_scenarios[409]>
          <Function test_robustness_scenarios[410]>
          <Function test_robustness_scenarios[411]>
          <Function test_robustness_scenarios[412]>
          <Function test_robustness_scenarios[413]>
          <Function test_robustness_scenarios[414]>
          <Function test_robustness_scenarios[415]>
          <Function test_robustness_scenarios[416]>
          <Function test_robustness_scenarios[417]>
          <Function test_robustness_scenarios[418]>
          <Function test_robustness_scenarios[419]>
          <Function test_robustness_scenarios[420]>
          <Function test_robustness_scenarios[421]>
          <Function test_robustness_scenarios[422]>
          <Function test_robustness_scenarios[423]>
          <Function test_robustness_scenarios[424]>
          <Function test_robustness_scenarios[425]>
          <Function test_robustness_scenarios[426]>
          <Function test_robustness_scenarios[427]>
          <Function test_robustness_scenarios[428]>
          <Function test_robustness_scenarios[429]>
          <Function test_robustness_scenarios[430]>
          <Function test_robustness_scenarios[431]>
          <Function test_robustness_scenarios[432]>
          <Function test_robustness_scenarios[433]>
          <Function test_robustness_scenarios[434]>
          <Function test_robustness_scenarios[435]>
          <Function test_robustness_scenarios[436]>
          <Function test_robustness_scenarios[437]>
          <Function test_robustness_scenarios[438]>
          <Function test_robustness_scenarios[439]>
          <Function test_robustness_scenarios[440]>
          <Function test_robustness_scenarios[441]>
          <Function test_robustness_scenarios[442]>
          <Function test_robustness_scenarios[443]>
          <Function test_robustness_scenarios[444]>
          <Function test_robustness_scenarios[445]>
          <Function test_robustness_scenarios[446]>
          <Function test_robustness_scenarios[447]>
          <Function test_robustness_scenarios[448]>
          <Function test_robustness_scenarios[449]>
          <Function test_robustness_scenarios[450]>
          <Function test_robustness_scenarios[451]>
          <Function test_robustness_scenarios[452]>
          <Function test_robustness_scenarios[453]>
          <Function test_robustness_scenarios[454]>
          <Function test_robustness_scenarios[455]>
          <Function test_robustness_scenarios[456]>
          <Function test_robustness_scenarios[457]>
          <Function test_robustness_scenarios[458]>
          <Function test_robustness_scenarios[459]>
          <Function test_robustness_scenarios[460]>
          <Function test_robustness_scenarios[461]>
          <Function test_robustness_scenarios[462]>
          <Function test_robustness_scenarios[463]>
          <Function test_robustness_scenarios[464]>
          <Function test_robustness_scenarios[465]>
          <Function test_robustness_scenarios[466]>
          <Function test_robustness_scenarios[467]>
          <Function test_robustness_scenarios[468]>
          <Function test_robustness_scenarios[469]>
          <Function test_robustness_scenarios[470]>
          <Function test_robustness_scenarios[471]>
          <Function test_robustness_scenarios[472]>
          <Function test_robustness_scenarios[473]>
          <Function test_robustness_scenarios[474]>
          <Function test_robustness_scenarios[475]>
          <Function test_robustness_scenarios[476]>
          <Function test_robustness_scenarios[477]>
          <Function test_robustness_scenarios[478]>
          <Function test_robustness_scenarios[479]>
          <Function test_robustness_scenarios[480]>
          <Function test_robustness_scenarios[481]>
          <Function test_robustness_scenarios[482]>
          <Function test_robustness_scenarios[483]>
          <Function test_robustness_scenarios[484]>
          <Function test_robustness_scenarios[485]>
          <Function test_robustness_scenarios[486]>
          <Function test_robustness_scenarios[487]>
          <Function test_robustness_scenarios[488]>
          <Function test_robustness_scenarios[489]>
          <Function test_robustness_scenarios[490]>
          <Function test_robustness_scenarios[491]>
          <Function test_robustness_scenarios[492]>
          <Function test_robustness_scenarios[493]>
          <Function test_robustness_scenarios[494]>
          <Function test_robustness_scenarios[495]>
          <Function test_robustness_scenarios[496]>
          <Function test_robustness_scenarios[497]>
          <Function test_robustness_scenarios[498]>
          <Function test_robustness_scenarios[499]>
          <Function test_robustness_scenarios[500]>
      <Module test_deployment.py>
        <Function test_live_health>
        <Function test_stt_api_live>
      <Module test_endpoint_cascade.py>
        <Class TestEndpointCascadeIntegration>
          <Function test_user_deletion_cascades_api>
          <Function test_note_deletion_cascades_api>
          <Function test_restoration_cascade_api>
          <Function test_deletion_integrity_protection>
      <Module test_manual_tasks.py>
        <Function test_create_task_no_note>
        <Function test_list_standalone_tasks>
      <Module test_new_endpoints.py>
        <Class TestNoteCreation>
          <Function test_create_note_success>
          <Function test_create_note_minimal>
          <Function test_create_note_no_title>
        <Class TestWhatsAppDraft>
          <Function test_get_whatsapp_draft>
          <Function test_whatsapp_draft_invalid_note>
        <Class TestSemanticAnalysis>
          <Function test_trigger_semantic_analysis>
          <Function test_semantic_analysis_invalid_note>
        <Class TestTaskCreation>
          <Function test_create_task_success>
          <Function test_create_task_minimal>
          <Function test_create_task_empty_description>
        <Class TestTaskFiltering>
          <Function test_get_tasks_due_today>
          <Function test_get_overdue_tasks>
          <Function test_get_assigned_to_me>
        <Class TestTaskSearch>
          <Function test_search_tasks>
          <Function test_search_tasks_empty_query>
        <Class TestTaskStatistics>
          <Function test_get_task_statistics>
        <Class TestTaskDuplication>
          <Function test_duplicate_task>
      <Module test_niche_2026.py>
        <Function test_dashboard_endpoint>
        <Function test_search_endpoint>
        <Function test_security_signature_verification>
        <Function test_security_invalid_signature>
        <Function test_whatsapp_draft_endpoint>
        <Function test_conflict_detection_logic>
      <Module test_niche_logic.py>
        <Function test_signature_logic>
        <Function test_conflict_detection_logic>
        <Function test_whatsapp_link_generation>
        <Coroutine test_analytics_logic>
        <Coroutine test_search_rag_context_building>
      <Module test_phase1_standalone.py>
        <Class TestSecurityOwnershipValidation>
          <Function test_fix_list_notes_ownership_filter>
          <Function test_fix_get_note_ownership_check>
          <Function test_fix_update_note_ownership_check>
          <Function test_fix_restore_note_ownership_check>
        <Class TestValidationFileUpload>
          <Function test_fix_file_size_validation>
          <Function test_fix_audio_file_type_whitelist>
        <Class TestValidationPagination>
          <Function test_fix_pagination_skip_validation>
          <Function test_fix_pagination_limit_validation>
        <Class TestTimestampTracking>
          <Function test_fix_updated_at_on_create>
          <Function test_fix_updated_at_on_update>
        <Class TestResponseFormatConsistency>
          <Function test_fix_note_response_schema>
        <Class TestArchiveValidation>
          <Function test_fix_prevent_archive_with_active_high_priority_task>
        <Class TestErrorHandling>
          <Function test_fix_ai_missing_file_handling>
          <Function test_fix_ai_json_validation_empty_input>
          <Function test_fix_ai_json_parse_error>
        <Class TestPhase1Integration>
          <Function test_integration_full_note_lifecycle_with_security>
      <Module test_phase2_worker_pipeline.py>
        <Coroutine test_worker_pipeline_persists_entities_and_actions>
      <Module test_restoration_endpoints.py>
        <Class TestAdminUpdates>
          <Function test_admin_update_user>
        <Class TestNotesRestoration>
          <Function test_restore_note>
          <Function test_bulk_delete_notes>
        <Class TestTasksRestoration>
          <Function test_task_lifecycle_and_bulk>
      <Module test_standalone_suite.py>
        <Class TestAudioChunkerStandalone>
          <Function test_validation_empty_file>
          <Function test_validation_nonexistent_file>
          <Function test_should_chunk_logic>
          <Function test_merge_transcripts>
        <Class TestMetricsCollectorStandalone>
          <Function test_timer_basic>
          <Function test_record_metric>
          <Function test_memory_snapshot>
        <Class TestRAGEvaluatorStandalone>
          <Function test_precision_at_k>
          <Function test_recall_at_k>
          <Function test_mrr>
          <Function test_cosine_similarity>
        <Class TestSystemRobustness>
          <Function test_graceful_handling_corrupted_audio>
          <Function test_graceful_handling_wrong_format>
    <Dir performance>
      <Module test_advanced_performance.py>
        <Class TestSecurityPerformance>
          <Function test_rate_limit_exhaustion>
          <Function test_rate_limit_under_load>
          <Function test_injection_payload_validation>
          <Function test_xss_payload_validation>
          <Function test_large_payload_performance>
          <Function test_slowloris_like_attack>
        <Class TestDatabaseEfficiency>
          <Function test_n_plus_one_detection>
          <Function test_connection_pool_starvation>
          <Function test_cache_stampede_scenario>
          <Function test_cache_stampede_with_lock>
          <Function test_connection_pool_recovery>
        <Class TestBackgroundTaskPerformance>
          <Function test_queue_depth_latency>
          <Function test_task_idempotency>
          <Function test_zombie_task_recovery>
          <Function test_task_timeout_handling>
        <Class TestLoadAndLatency>
          <Function test_latency_percentiles>
          <Function test_concurrent_load>
          <Function test_response_time_consistency>
          <Function test_throughput_under_sustained_load>
        <Class TestCachingEfficiency>
          <Function test_cache_hit_ratio>
          <Function test_cache_eviction_lru>
          <Function test_cache_warm_vs_cold>
          <Function test_cache_invalidation_impact>
        <Class TestErrorHandling>
          <Function test_error_response_speed>
          <Function test_malformed_json_handling>
          <Function test_error_response_consistency>
        <Class TestRequestTracking>
          <Function test_request_tracker_overhead>
          <Function test_metrics_accuracy>
        <Class TestEndpointConcurrency>
          <Function test_concurrent_endpoint_calls>
          <Function test_different_endpoints_concurrency>
      <Module test_billing_concurrency.py>
        <Class TestBillingConcurrency>
          <Function test_concurrent_wallet_deduction>
          <Function test_concurrent_overdraft_prevention>
      <Module test_endpoint_load.py>
        <Class TestNotesEndpointLoad>
          <Function test_get_notes_light_load>
          <Function test_get_notes_medium_load>
          <Function test_get_notes_heavy_load>
          <Function test_create_note_multiple_times>
          <Function test_notes_pagination_stress>
        <Class TestAIEndpointLoad>
          <Function test_ask_ai_light_load>
          <Function test_ask_ai_concurrent_heavy>
          <Function test_ai_streaming_response>
        <Class TestUsersEndpointLoad>
          <Function test_get_profile_light_load>
          <Function test_user_search_heavy_load>
        <Class TestTasksEndpointLoad>
          <Function test_get_tasks_multiple_loads>
          <Function test_create_task_burst>
        <Class TestCombinedEndpointStress>
          <Function test_mixed_endpoint_stress>
          <Function test_endpoint_sequential_load_increase>
        <Class TestPerformanceDegradation>
          <Function test_latency_degradation_detection>
          <Function test_throughput_saturation_detection>
      <Module test_load_concurrent.py>
        <Class TestConcurrentAudioProcessing>
          <Function test_concurrent_audio_validation>
          <Function test_concurrent_quality_analysis>
        <Class TestConcurrentRAGQueries>
          <Function test_concurrent_rag_evaluation>
          <Function test_concurrent_embedding_similarity>
        <Class TestConcurrentLLMOperations>
          <Function test_concurrent_text_processing>
        <Class TestSecurityUnderLoad>
          <Function test_rate_limiting_under_load>
          <Function test_input_validation_under_load>
        <Class TestMemoryUnderLoad>
          <Function test_memory_usage_concurrent_operations>
        <Class TestEndToEndConcurrent>
          <Function test_concurrent_note_processing_simulation>
        <Class TestStressTest>
          <Function test_extreme_concurrent_load>
    <Dir scenarios>
      <Module test_ideal_conditions.py>
        <Class TestIdealConditions>
          <Function test_clean_short_audio_validation>
          <Function test_clean_short_audio_no_chunking_needed>
          <Function test_clean_3min_audio_validation>
          <Function test_clean_3min_audio_no_chunking>
          <Function test_audio_format_conversion>
          <Function test_validation_performance>
      <Module test_worst_case.py>
        <Class TestWorstCaseConditions>
          <Function test_empty_file_handling>
          <Function test_corrupted_file_handling>
          <Function test_wrong_format_handling>
          <Function test_very_short_audio_handling>
          <Function test_very_long_audio_chunking>
          <Function test_silent_audio_handling>
          <Function test_pure_noise_handling>
          <Function test_nonexistent_file_handling>
          <Function test_error_handling_performance>
          <Function test_graceful_degradation>
    <Dir security>
      <Module test_security_attacks.py>
        <Class TestInjectionAttacks>
          <Function test_sql_injection_on_email>
          <Function test_sql_injection_on_search>
          <Function test_xss_on_transcript>
          <Function test_xss_on_title>
          <Function test_command_injection_detection>
        <Class TestRateLimitingAttacks>
          <Function test_brute_force_detection>
          <Function test_rate_limit_per_ip>
          <Function test_rate_limit_gradual_backoff>
        <Class TestDoSAttacks>
          <Function test_resource_exhaustion_threads>
          <Function test_memory_bomb_detection>
          <Function test_slowloris_connection_holding>
          <Function test_bandwidth_exhaustion>
        <Class TestAuthenticationSecurity>
          <Function test_password_length_limits>
          <Function test_token_expiration>
          <Function test_session_fixation_prevention>
        <Class TestDataValidationSecurity>
          <Function test_unicode_bypass_attempts>
          <Function test_null_byte_injection>
          <Function test_encoding_bypass>
        <Class TestCryptographicSecurity>
          <Function test_weak_random_detection>
          <Function test_timing_attack_resistance>
        <Class TestHeaderInjection>
          <Function test_http_response_splitting>
          <Function test_header_length_limits>
        <Class TestRaceConditions>
          <Function test_concurrent_account_creation>
          <Function test_double_submit_prevention>
    <Dir unit>
      <Module test_audit_logic_2.py>
        <Coroutine test_device_signature_with_query>
        <Function test_note_ownership_bola>
        <Function test_note_status_processing>
        <Function test_dynamic_meeting_roi>
        <Function test_stop_words_filtering>
      <Module test_deletion_logic.py>
        <Class TestDeletionServiceUnit>
          <Function test_soft_delete_user_cascade>
          <Function test_soft_delete_note_cascade>
          <Function test_soft_delete_task>
          <Function test_restore_user_cascade>
          <Function test_restore_note>
          <Function test_hard_delete_user_cascade>
        <Class TestDatabaseIntegrityUnit>
          <Function test_foreign_key_cascade_db_level>
          <Function test_soft_delete_flag_indexing>
      <Module test_pure_logic.py>
        <Class TestAudioValidationLogic>
          <Function test_file_size_check>
          <Function test_chunking_decision_logic>
        <Class TestRAGMetricsLogic>
          <Function test_precision_calculation>
          <Function test_recall_calculation>
          <Function test_mrr_calculation>
          <Function test_cosine_similarity_calculation>
        <Class TestMetricsLogic>
          <Function test_timer_logic>
          <Function test_summary_statistics>
        <Class TestSystemRobustnessLogic>
          <Function test_file_existence_check>
          <Function test_error_message_generation>
          <Function test_graceful_degradation_pattern>
        <Class TestPerformanceBenchmarks>
          <Function test_validation_speed>
          <Function test_metric_calculation_speed>

=============================== warnings summary ===============================
../usr/local/lib/python3.11/site-packages/pydub/utils.py:300
  /usr/local/lib/python3.11/site-packages/pydub/utils.py:300: DeprecationWarning: invalid escape sequence '\('
    m = re.match('([su]([0-9]{1,2})p?) \(([0-9]{1,2}) bit\)$', token)

../usr/local/lib/python3.11/site-packages/pydub/utils.py:301
  /usr/local/lib/python3.11/site-packages/pydub/utils.py:301: DeprecationWarning: invalid escape sequence '\('
    m2 = re.match('([su]([0-9]{1,2})p?)( \(default\))?$', token)

../usr/local/lib/python3.11/site-packages/pydub/utils.py:310
  /usr/local/lib/python3.11/site-packages/pydub/utils.py:310: DeprecationWarning: invalid escape sequence '\('
    elif re.match('(flt)p?( \(default\))?$', token):

../usr/local/lib/python3.11/site-packages/pydub/utils.py:314
  /usr/local/lib/python3.11/site-packages/pydub/utils.py:314: DeprecationWarning: invalid escape sequence '\('
    elif re.match('(dbl)p?( \(default\))?$', token):

../usr/local/lib/python3.11/site-packages/pydub/utils.py:14
  /usr/local/lib/python3.11/site-packages/pydub/utils.py:14: DeprecationWarning: 'audioop' is deprecated and slated for removal in Python 3.13
    import audioop

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 882 tests collected in 12.32s =========================
