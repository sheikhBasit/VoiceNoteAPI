
==================================================
üå± VOICENOTE DATABASE SEEDING
==================================================
2026-01-25 00:06:47,646 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2026-01-25 00:06:47,646 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-01-25 00:06:47,649 INFO sqlalchemy.engine.Engine select current_schema()
2026-01-25 00:06:47,649 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-01-25 00:06:47,653 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2026-01-25 00:06:47,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-01-25 00:06:47,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-25 00:06:47,664 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,664 INFO sqlalchemy.engine.Engine [generated in 0.00062s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,671 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,671 INFO sqlalchemy.engine.Engine [cached since 0.007881s ago] ('notes', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,674 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,674 INFO sqlalchemy.engine.Engine [cached since 0.01033s ago] ('tasks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,675 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,676 INFO sqlalchemy.engine.Engine [cached since 0.01199s ago] ('api_keys', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,677 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,677 INFO sqlalchemy.engine.Engine [cached since 0.01359s ago] ('system_settings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,679 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,679 INFO sqlalchemy.engine.Engine [cached since 0.01537s ago] ('wallets', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,680 INFO sqlalchemy.engine.Engine [cached since 0.01695s ago] ('transactions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-25 00:06:47,682 INFO sqlalchemy.engine.Engine [cached since 0.01831s ago] ('usage_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-25 00:06:47,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-25 00:06:47,687 INFO sqlalchemy.engine.Engine [generated in 0.00058s] ('userrole', 'pg_catalog')
2026-01-25 00:06:47,692 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-25 00:06:47,692 INFO sqlalchemy.engine.Engine [cached since 0.00524s ago] ('priority', 'pg_catalog')
2026-01-25 00:06:47,694 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-25 00:06:47,694 INFO sqlalchemy.engine.Engine [cached since 0.007567s ago] ('notestatus', 'pg_catalog')
2026-01-25 00:06:47,696 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-25 00:06:47,696 INFO sqlalchemy.engine.Engine [cached since 0.009816s ago] ('communicationtype', 'pg_catalog')
2026-01-25 00:06:47,698 INFO sqlalchemy.engine.Engine COMMIT
‚úÖ Database tables created successfully
2026-01-25 00:06:47,733 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-25 00:06:47,742 INFO sqlalchemy.engine.Engine INSERT INTO users (id, token, name, email, device_id, device_model, password_hash, last_login, is_deleted, deleted_at, deleted_by, deletion_reason, can_restore, primary_role, secondary_role, custom_role_description, system_prompt, jargons, is_admin, admin_permissions, admin_created_at, admin_last_action, show_floating_button, work_start_hour, work_end_hour, work_days) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::BOOLEAN, $10::BIGINT, $11::VARCHAR, $12::VARCHAR, $13::BOOLEAN, $14::userrole, $15::userrole, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::JSON, $21::BIGINT, $22::BIGINT, $23::BOOLEAN, $24::INTEGER, $25::INTEGER, $26::JSON)
2026-01-25 00:06:47,742 INFO sqlalchemy.engine.Engine [generated in 0.00128s] [('admin_user_001', 'admin_token_3a2ae348-7fdf-4cc9-9561-bf9905733427', 'System Admin', 'admin@voicenote.app', 'admin_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_delete_users": true, "can_view_all_notes": true, "can_delete_notes": true, "can_manage_admins": true, "can_view_ana ... (34 characters truncated) ... settings": true, "can_moderate_content": true, "can_manage_roles": true, "can_export_data": true, "permission_level": "full", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('moderator_user_001', 'moderator_token_144d905c-97a5-48a0-a899-427112618821', 'Content Moderator', 'moderator@voicenote.app', 'moderator_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_moderate_content": true, "can_view_all_notes": true, "can_delete_notes": true, "permission_level": "moderator", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('viewer_user_001', 'viewer_token_39e57031-5a9e-4b9b-b0ef-c8f09ab21705', 'Analytics Viewer', 'viewer@voicenote.app', 'viewer_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_view_analytics": true, "can_view_all_notes": true, "permission_level": "viewer", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]')]
2026-01-25 00:06:47,763 INFO sqlalchemy.engine.Engine ROLLBACK

‚ùå Error during seeding: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_users_email"
DETAIL:  Key (email)=(admin@voicenote.app) already exists.
[SQL: INSERT INTO users (id, token, name, email, device_id, device_model, password_hash, last_login, is_deleted, deleted_at, deleted_by, deletion_reason, can_restore, primary_role, secondary_role, custom_role_description, system_prompt, jargons, is_admin, admin_permissions, admin_created_at, admin_last_action, show_floating_button, work_start_hour, work_end_hour, work_days) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::BOOLEAN, $10::BIGINT, $11::VARCHAR, $12::VARCHAR, $13::BOOLEAN, $14::userrole, $15::userrole, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::JSON, $21::BIGINT, $22::BIGINT, $23::BOOLEAN, $24::INTEGER, $25::INTEGER, $26::JSON)]
[parameters: [('admin_user_001', 'admin_token_3a2ae348-7fdf-4cc9-9561-bf9905733427', 'System Admin', 'admin@voicenote.app', 'admin_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_delete_users": true, "can_view_all_notes": true, "can_delete_notes": true, "can_manage_admins": true, "can_view_ana ... (34 characters truncated) ... settings": true, "can_moderate_content": true, "can_manage_roles": true, "can_export_data": true, "permission_level": "full", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('moderator_user_001', 'moderator_token_144d905c-97a5-48a0-a899-427112618821', 'Content Moderator', 'moderator@voicenote.app', 'moderator_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_moderate_content": true, "can_view_all_notes": true, "can_delete_notes": true, "permission_level": "moderator", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('viewer_user_001', 'viewer_token_39e57031-5a9e-4b9b-b0ef-c8f09ab21705', 'Analytics Viewer', 'viewer@voicenote.app', 'viewer_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_view_analytics": true, "can_view_all_notes": true, "permission_level": "viewer", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]')]]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 578, in _executemany
    return await self._connection.executemany(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/asyncpg/connection.py", line 401, in executemany
    return await self._executemany(command, args, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/asyncpg/connection.py", line 1997, in _executemany
    result, _ = await self._do_execute(
                ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/asyncpg/connection.py", line 2033, in _do_execute
    result = await executor(stmt, None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 266, in bind_execute_many
asyncpg.exceptions.UniqueViolationError: duplicate key value violates unique constraint "ix_users_email"
DETAIL:  Key (email)=(admin@voicenote.app) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1936, in _exec_single_context
    self.dialect.do_executemany(
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 949, in do_executemany
    cursor.executemany(statement, parameters)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 590, in executemany
    return self._adapt_connection.await_(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 582, in _executemany
    self._handle_exception(error)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_users_email"
DETAIL:  Key (email)=(admin@voicenote.app) already exists.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/scripts/seed_db.py", line 262, in <module>
    asyncio.run(main())
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/scripts/seed_db.py", line 241, in main
    await seed_users(session)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/scripts/seed_db.py", line 132, in seed_users
    await session.commit()
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1311, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1286, in _prepare_impl
    self.session.flush()
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4331, in flush
    self._flush(objects)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4466, in _flush
    with util.safe_reraise():
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4427, in _flush
    flush_context.execute()
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1936, in _exec_single_context
    self.dialect.do_executemany(
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 949, in do_executemany
    cursor.executemany(statement, parameters)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 590, in executemany
    return self._adapt_connection.await_(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 582, in _executemany
    self._handle_exception(error)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/home/basitdev/Me/StudioProjects/VoiceNoteAPI/venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "ix_users_email"
DETAIL:  Key (email)=(admin@voicenote.app) already exists.
[SQL: INSERT INTO users (id, token, name, email, device_id, device_model, password_hash, last_login, is_deleted, deleted_at, deleted_by, deletion_reason, can_restore, primary_role, secondary_role, custom_role_description, system_prompt, jargons, is_admin, admin_permissions, admin_created_at, admin_last_action, show_floating_button, work_start_hour, work_end_hour, work_days) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::BOOLEAN, $10::BIGINT, $11::VARCHAR, $12::VARCHAR, $13::BOOLEAN, $14::userrole, $15::userrole, $16::VARCHAR, $17::VARCHAR, $18::JSON, $19::BOOLEAN, $20::JSON, $21::BIGINT, $22::BIGINT, $23::BOOLEAN, $24::INTEGER, $25::INTEGER, $26::JSON)]
[parameters: [('admin_user_001', 'admin_token_3a2ae348-7fdf-4cc9-9561-bf9905733427', 'System Admin', 'admin@voicenote.app', 'admin_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_delete_users": true, "can_view_all_notes": true, "can_delete_notes": true, "can_manage_admins": true, "can_view_ana ... (34 characters truncated) ... settings": true, "can_moderate_content": true, "can_manage_roles": true, "can_export_data": true, "permission_level": "full", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('moderator_user_001', 'moderator_token_144d905c-97a5-48a0-a899-427112618821', 'Content Moderator', 'moderator@voicenote.app', 'moderator_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_moderate_content": true, "can_view_all_notes": true, "can_delete_notes": true, "permission_level": "moderator", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]'), ('viewer_user_001', 'viewer_token_39e57031-5a9e-4b9b-b0ef-c8f09ab21705', 'Analytics Viewer', 'viewer@voicenote.app', 'viewer_device_001', 'Server', None, 1769281607699, False, None, None, None, True, 'GENERIC', None, None, None, '[]', True, '{"can_view_all_users": true, "can_view_analytics": true, "can_view_all_notes": true, "permission_level": "viewer", "granted_by": "system"}', 1769281607699, None, True, 9, 17, '[2, 3, 4, 5, 6]')]]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
